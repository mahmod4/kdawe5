// ================================
// ÙØ­Øµ Ø¬Ø§Ù‡Ø²ÙŠØ© Firebase ÙˆØªØ­Ø³ÙŠÙ† Ø§Ù„Ø£Ø¯Ø§Ø¡
// Ù‡Ø°Ø§ Ø§Ù„Ù…Ù„Ù ÙŠØ­ØªÙˆÙŠ Ø¹Ù„Ù‰ Ø£Ø¯ÙˆØ§Øª Ù…ØªÙ‚Ø¯Ù…Ø© Ù„Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø¬Ø§Ù‡Ø²ÙŠØ© Firebase ÙˆØªØ­Ø³ÙŠÙ† Ø£Ø¯Ø§Ø¡ Ø§Ù„ØªØ­Ù…ÙŠÙ„
// ================================

// Ù…ØªØºÙŠØ±Ø§Øª ØªØªØ¨Ø¹ Ø­Ø§Ù„Ø© Firebase
let firebaseReady = false; // Ù‡Ù„ Firebase Ø¬Ø§Ù‡Ø² Ù„Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù…ØŸ
let firebaseCheckAttempts = 0; // Ø¹Ø¯Ø¯ Ù…Ø­Ø§ÙˆÙ„Ø§Øª Ø§Ù„ØªØ­Ù‚Ù‚
const maxFirebaseChecks = 75; // Ø§Ù„Ø­Ø¯ Ø§Ù„Ø£Ù‚ØµÙ‰ Ù„Ù„Ù…Ø­Ø§ÙˆÙ„Ø§Øª (15 Ø«Ø§Ù†ÙŠØ© * 5 ØªØ­Ù‚Ù‚Ø§Øª ÙÙŠ Ø§Ù„Ø«Ø§Ù†ÙŠØ©)

// ÙØ­Øµ Ø¬Ø§Ù‡Ø²ÙŠØ© Firebase Ø¨Ø´ÙƒÙ„ Ù…ØªÙ‚Ø¯Ù…
// Ù‡Ø°Ù‡ Ø§Ù„Ø¯Ø§Ù„Ø© ØªØªØ­Ù‚Ù‚ Ù…Ù† Ø¬Ù…ÙŠØ¹ Ù…ÙƒØªØ¨Ø§Øª Firebase Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø© Ø¨Ø´ÙƒÙ„ Ù…ÙØµÙ„
function checkFirebaseReady() {
    firebaseCheckAttempts++; // Ø²ÙŠØ§Ø¯Ø© Ø¹Ø¯Ø¯ Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø§Øª
    
    // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† ÙˆØ¬ÙˆØ¯ Ø¬Ù…ÙŠØ¹ Ù…ÙƒØªØ¨Ø§Øª Firebase Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø© Ø¨Ø´ÙƒÙ„ Ù…Ù†ÙØµÙ„
    const hasApp = window.firebase && window.firebase.app; // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ù…ÙƒØªØ¨Ø© Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ©
    const hasAuth = window.firebase && window.firebase.auth; // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ù…ÙƒØªØ¨Ø© Ø§Ù„Ù…ØµØ§Ø¯Ù‚Ø©
    const hasFirestore = window.firebase && window.firebaseFirestore; // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ù…ÙƒØªØ¨Ø© Firestore
    const hasStorage = window.firebase && window.firebaseStorage; // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ù…ÙƒØªØ¨Ø© Ø§Ù„ØªØ®Ø²ÙŠÙ†
    
    // Ø¥Ø°Ø§ ÙƒØ§Ù†Øª Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…ÙƒØªØ¨Ø§Øª Ù…ØªÙˆÙØ±Ø©
    if (hasApp && hasAuth && hasFirestore && hasStorage) {
        firebaseReady = true; // ØªØ¹ÙŠÙŠÙ† Ø§Ù„Ø­Ø§Ù„Ø© Ø¥Ù„Ù‰ Ø¬Ø§Ù‡Ø²
        console.log('âœ… Firebase Ø£ØµØ¨Ø­ Ø¬Ø§Ù‡Ø²Ø§Ù‹ Ø¨Ø§Ù„ÙƒØ§Ù…Ù„ (Ù…Ø­Ø§ÙˆÙ„Ø©:', firebaseCheckAttempts, ')');
        return true; // Ø¥Ø±Ø¬Ø§Ø¹ Ù†Ø¬Ø§Ø­
    }
    
    // Ø¥Ø°Ø§ ØªØ¬Ø§ÙˆØ²Ù†Ø§ Ø¹Ø¯Ø¯ Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø§Øª Ø§Ù„Ù…Ø³Ù…ÙˆØ­ Ø¨Ù‡
    if (firebaseCheckAttempts >= maxFirebaseChecks) {
        console.warn('â° ØªØ¬Ø§ÙˆØ² ÙˆÙ‚Øª Ø§Ù†ØªØ¸Ø§Ø± FirebaseØŒ Ø³ÙŠØªÙ… Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ù…Ø­Ù„ÙŠØ©');
        // Ø¹Ø±Ø¶ Ø­Ø§Ù„Ø© ÙƒÙ„ Ù…ÙƒØªØ¨Ø© Ù„Ù„ØªØ´Ø®ÙŠØµ
        console.log('ğŸ“Š Ø­Ø§Ù„Ø© Ø§Ù„Ù…ÙƒØªØ¨Ø§Øª:', {
            app: hasApp, // Ø­Ø§Ù„Ø© Ù…ÙƒØªØ¨Ø© Ø§Ù„ØªØ·Ø¨ÙŠÙ‚
            auth: hasAuth, // Ø­Ø§Ù„Ø© Ù…ÙƒØªØ¨Ø© Ø§Ù„Ù…ØµØ§Ø¯Ù‚Ø©
            firestore: hasFirestore, // Ø­Ø§Ù„Ø© Ù…ÙƒØªØ¨Ø© Firestore
            storage: hasStorage, // Ø­Ø§Ù„Ø© Ù…ÙƒØªØ¨Ø© Ø§Ù„ØªØ®Ø²ÙŠÙ†
            attempts: firebaseCheckAttempts // Ø¹Ø¯Ø¯ Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø§Øª
        });
        return false; // Ø¥Ø±Ø¬Ø§Ø¹ ÙØ´Ù„
    }
    
    // Ù…ØªØ§Ø¨Ø¹Ø© Ø§Ù„ÙØ­Øµ Ø¨Ø¹Ø¯ ÙØªØ±Ø© ÙˆØ¬ÙŠØ²Ø©
    setTimeout(checkFirebaseReady, 200); // Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø© Ø¨Ø¹Ø¯ 200 Ù…Ù„Ù„ÙŠ Ø«Ø§Ù†ÙŠØ©
    return false; // Ù„Ù… ÙŠØµØ¨Ø­ Ø¬Ø§Ù‡Ø²Ø§Ù‹ Ø¨Ø¹Ø¯
}

// Ø§Ù†ØªØ¸Ø§Ø± Ø¬Ø§Ù‡Ø²ÙŠØ© Firebase Ù…Ø¹ ÙˆØ¹Ø¯ (Promise)
// Ù‡Ø°Ù‡ Ø§Ù„Ø¯Ø§Ù„Ø© ØªÙˆÙØ± Ø·Ø±ÙŠÙ‚Ø© Ø­Ø¯ÙŠØ«Ø© Ù„Ø§Ù†ØªØ¸Ø§Ø± Firebase Ø¨Ø§Ø³ØªØ®Ø¯Ø§Ù… Promises
function waitForFirebaseOptimized(timeout = 15000) {
    return new Promise((resolve) => {
        // Ø¥Ø°Ø§ ÙƒØ§Ù† Firebase Ø¬Ø§Ù‡Ø²Ø§Ù‹ Ø¨Ø§Ù„ÙØ¹Ù„
        if (firebaseReady) {
            resolve(true); // Ø¥Ù†Ù‡Ø§Ø¡ Ø§Ù„ÙˆØ¹Ø¯ ÙÙˆØ±Ø§Ù‹
            return;
        }
        
        const startTime = Date.now(); // ØªØ³Ø¬ÙŠÙ„ ÙˆÙ‚Øª Ø§Ù„Ø¨Ø¯Ø¡ Ù„Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ù…Ù‡Ù„Ø©
        
        // Ø¯Ø§Ù„Ø© Ø¯Ø§Ø®Ù„ÙŠØ© Ù„Ù„ØªØ­Ù‚Ù‚ Ù…Ø¹ Ù…Ø±Ø§Ø¹Ø§Ø© Ø§Ù„ÙˆÙ‚Øª Ø§Ù„Ù…Ø­Ø¯Ø¯
        function checkWithTimeout() {
            if (firebaseReady) {
                resolve(true); // Firebase Ø£ØµØ¨Ø­ Ø¬Ø§Ù‡Ø²Ø§Ù‹
            } else if (Date.now() - startTime > timeout) {
                console.warn('â° Ø§Ù†ØªÙ‡Ù‰ ÙˆÙ‚Øª Ø§Ù†ØªØ¸Ø§Ø± Firebase');
                resolve(false); // ØªØ¬Ø§ÙˆØ² Ø§Ù„ÙˆÙ‚Øª Ø§Ù„Ù…Ø­Ø¯Ø¯
            } else {
                setTimeout(checkWithTimeout, 100); // Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø© Ø¨Ø¹Ø¯ 100 Ù…Ù„Ù„ÙŠ Ø«Ø§Ù†ÙŠØ©
            }
        }
        
        checkWithTimeout(); // Ø¨Ø¯Ø¡ Ø¹Ù…Ù„ÙŠØ© Ø§Ù„ØªØ­Ù‚Ù‚
    });
}

// ØªÙ‡ÙŠØ¦Ø© ÙØ­Øµ Firebase Ø¹Ù†Ø¯ ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØµÙØ­Ø©
// Ù‡Ø°Ù‡ Ø§Ù„Ø¯Ø§Ù„Ø© ØªØ¨Ø¯Ø£ Ø¹Ù…Ù„ÙŠØ© ÙØ­Øµ Ø¬Ø§Ù‡Ø²ÙŠØ© Firebase
function initFirebaseCheck() {
    console.log('ğŸ” Ø¨Ø¯Ø¡ ÙØ­Øµ Ø¬Ø§Ù‡Ø²ÙŠØ© Firebase...'); // Ø±Ø³Ø§Ù„Ø© Ø¨Ø¯Ø¡ Ø§Ù„Ø¹Ù…Ù„ÙŠØ©
    firebaseCheckAttempts = 0; // ØªØµÙÙŠØ± Ø¹Ø¯Ø§Ø¯ Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø§Øª
    firebaseReady = false; // Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† Ø­Ø§Ù„Ø© Ø§Ù„Ø¬Ø§Ù‡Ø²ÙŠØ©
    
    // Ø¨Ø¯Ø¡ Ø§Ù„ÙØ­Øµ Ø¨Ø¹Ø¯ 500ms Ù„Ø¶Ù…Ø§Ù† ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù…ÙƒØªØ¨Ø§Øª Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ©
    setTimeout(checkFirebaseReady, 500);
}

// Ø¯Ø§Ù„Ø© Ù…Ø­Ø³Ù†Ø© Ù„Ø¬Ù„Ø¨ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù…Ø¹ Ù…Ø¹Ø§Ù„Ø¬Ø© Ø§Ù„Ø£Ø®Ø·Ø§Ø¡
// Ù‡Ø°Ù‡ Ø§Ù„Ø¯Ø§Ù„Ø© ØªÙˆÙØ± Ø·Ø±ÙŠÙ‚Ø© Ø¢Ù…Ù†Ø© Ù„Ø¬Ù„Ø¨ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù…Ù† Firebase Ù…Ø¹ Ù…Ø¹Ø§Ù„Ø¬Ø© Ø§Ù„Ø£Ø®Ø·Ø§Ø¡
async function safeFetchData(fetchFunction, fallbackData = null, itemName = 'Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª') {
    try {
        // Ø§Ù†ØªØ¸Ø± Ø¬Ø§Ù‡Ø²ÙŠØ© Firebase
        const isReady = await waitForFirebaseOptimized();
        
        if (!isReady) {
            console.warn(`âš ï¸ Firebase Ù„ÙŠØ³ Ø¬Ø§Ù‡Ø²Ø§Ù‹ Ù„Ø¬Ù„Ø¨ ${itemName}ØŒ Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø§Ø­ØªÙŠØ§Ø·ÙŠØ©`);
            return fallbackData || {}; // Ø¥Ø±Ø¬Ø§Ø¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø§Ø­ØªÙŠØ§Ø·ÙŠØ©
        }
        
        // Ø¬Ù„Ø¨ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø¨Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„Ø¯Ø§Ù„Ø© Ø§Ù„Ù…Ù…Ø±Ø±Ø©
        const data = await fetchFunction();
        console.log(`âœ… ØªÙ… Ø¬Ù„Ø¨ ${itemName} Ø¨Ù†Ø¬Ø§Ø­`); // Ø±Ø³Ø§Ù„Ø© Ù†Ø¬Ø§Ø­
        return data; // Ø¥Ø±Ø¬Ø§Ø¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø¬Ù„ÙˆØ¨Ø©
        
    } catch (error) {
        console.error(`âŒ Ø®Ø·Ø£ ÙÙŠ Ø¬Ù„Ø¨ ${itemName}:`, error); // Ø±Ø³Ø§Ù„Ø© Ø®Ø·Ø£ Ù…ÙØµÙ„Ø©
        
        // Ù…Ø­Ø§ÙˆÙ„Ø© Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø§Ø­ØªÙŠØ§Ø·ÙŠØ© Ø¥Ø°Ø§ ÙƒØ§Ù†Øª Ù…ØªÙˆÙØ±Ø©
        if (fallbackData) {
            console.log(`ğŸ”„ Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø§Ø­ØªÙŠØ§Ø·ÙŠØ© Ù„Ù€ ${itemName}`); // Ø±Ø³Ø§Ù„Ø© Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„Ø§Ø­ØªÙŠØ§Ø·ÙŠ
            return fallbackData; // Ø¥Ø±Ø¬Ø§Ø¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø§Ø­ØªÙŠØ§Ø·ÙŠØ©
        }
        
        throw error; // Ø¥Ø¹Ø§Ø¯Ø© Ø±Ù…ÙŠ Ø§Ù„Ø®Ø·Ø£ Ø¥Ø°Ø§ Ù„Ù… ØªÙˆØ¬Ø¯ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ø­ØªÙŠØ§Ø·ÙŠØ©
    }
}

// ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø¨Ø´ÙƒÙ„ Ù…ØªØ³Ù„Ø³Ù„ ÙˆØ¢Ù…Ù†
// Ù‡Ø°Ù‡ Ø§Ù„Ø¯Ø§Ù„Ø© ØªØ­Ù…Ù„ Ø¬Ù…ÙŠØ¹ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ Ø¨Ø§Ù„ØªØ±ØªÙŠØ¨ Ø§Ù„ØµØ­ÙŠØ­ Ù…Ø¹ Ù…Ø¹Ø§Ù„Ø¬Ø© Ø§Ù„Ø£Ø®Ø·Ø§Ø¡
async function loadAllDataSafely() {
    console.log('ğŸš€ Ø¨Ø¯Ø¡ ØªØ­Ù…ÙŠÙ„ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø¨Ø´ÙƒÙ„ Ø¢Ù…Ù†...'); // Ø±Ø³Ø§Ù„Ø© Ø¨Ø¯Ø¡ Ø§Ù„Ø¹Ù…Ù„ÙŠØ©
    
    // ÙƒØ§Ø¦Ù† Ù„ØªØ®Ø²ÙŠÙ† Ù†ØªØ§Ø¦Ø¬ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
    const results = {
        settings: null, // Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ù…ØªØ¬Ø±
        products: null, // Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª
        categories: null, // Ø§Ù„ÙØ¦Ø§Øª
        offers: null // Ø§Ù„Ø¹Ø±ÙˆØ¶
    };
    
    try {
        // ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø£ÙˆÙ„Ø§Ù‹ (Ø§Ù„Ø£Ù‡Ù… Ù„Ø£Ù† Ø§Ù„Ø¨Ù‚ÙŠØ© ØªØ¹ØªÙ…Ø¯ Ø¹Ù„ÙŠÙ‡Ø§)
        results.settings = await safeFetchData(
            () => fetchSettings(), // Ø¯Ø§Ù„Ø© Ø¬Ù„Ø¨ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª
            getDefaultSettings(), // Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø§Ø­ØªÙŠØ§Ø·ÙŠØ©
            'Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª' // Ø§Ø³Ù… Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù„Ù„Ø±Ø³Ø§Ø¦Ù„
        );
        
        // ØªØ­Ù…ÙŠÙ„ Ø§Ù„ÙØ¦Ø§Øª (ØªØ¹ØªÙ…Ø¯ Ø¹Ù„Ù‰ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª)
        results.categories = await safeFetchData(
            () => fetchCategories(), // Ø¯Ø§Ù„Ø© Ø¬Ù„Ø¨ Ø§Ù„ÙØ¦Ø§Øª
            getDefaultCategories(), // Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø§Ø­ØªÙŠØ§Ø·ÙŠØ©
            'Ø§Ù„ÙØ¦Ø§Øª' // Ø§Ø³Ù… Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù„Ù„Ø±Ø³Ø§Ø¦Ù„
        );
        
        // ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª (ØªØ¹ØªÙ…Ø¯ Ø¹Ù„Ù‰ Ø§Ù„ÙØ¦Ø§Øª)
        results.products = await safeFetchData(
            () => fetchProducts(), // Ø¯Ø§Ù„Ø© Ø¬Ù„Ø¨ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª
            getDefaultProducts(), // Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø§Ø­ØªÙŠØ§Ø·ÙŠØ©
            'Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª' // Ø§Ø³Ù… Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù„Ù„Ø±Ø³Ø§Ø¦Ù„
        );
        
        // ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¹Ø±ÙˆØ¶ (Ø§Ø®ØªÙŠØ§Ø±ÙŠ - Ù„ÙŠØ³ Ø¶Ø±ÙˆØ±ÙŠØ§Ù‹ Ù„Ø¹Ù…Ù„ Ø§Ù„ØªØ·Ø¨ÙŠÙ‚)
        results.offers = await safeFetchData(
            () => fetchOffers(), // Ø¯Ø§Ù„Ø© Ø¬Ù„Ø¨ Ø§Ù„Ø¹Ø±ÙˆØ¶
            [], // Ù…ØµÙÙˆÙØ© ÙØ§Ø±ØºØ© ÙƒØ¨ÙŠØ§Ù†Ø§Øª Ø§Ø­ØªÙŠØ§Ø·ÙŠØ©
            'Ø§Ù„Ø¹Ø±ÙˆØ¶' // Ø§Ø³Ù… Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù„Ù„Ø±Ø³Ø§Ø¦Ù„
        );
        
        console.log('ğŸ‰ ØªÙ… ØªØ­Ù…ÙŠÙ„ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø¨Ù†Ø¬Ø§Ø­'); // Ø±Ø³Ø§Ù„Ø© Ù†Ø¬Ø§Ø­ Ù†Ù‡Ø§Ø¦ÙŠØ©
        return results; // Ø¥Ø±Ø¬Ø§Ø¹ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù†ØªØ§Ø¦Ø¬
        
    } catch (error) {
        console.error('ğŸ’¥ ÙØ´Ù„ ØªØ­Ù…ÙŠÙ„ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª:', error); // Ø±Ø³Ø§Ù„Ø© Ø®Ø·Ø£ Ø¹Ø§Ù…Ø©
        
        // Ø¥Ø±Ø¬Ø§Ø¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø§ÙØªØ±Ø§Ø¶ÙŠØ© ÙÙŠ Ø­Ø§Ù„Ø© Ø§Ù„ÙØ´Ù„ Ø§Ù„ÙƒØ§Ù…Ù„ Ù„Ø¶Ù…Ø§Ù† Ø§Ø³ØªÙ…Ø±Ø§Ø± Ø§Ù„ØªØ·Ø¨ÙŠÙ‚
        return {
            settings: getDefaultSettings(), // Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§ÙØªØ±Ø§Ø¶ÙŠØ©
            categories: getDefaultCategories(), // ÙØ¦Ø§Øª Ø§ÙØªØ±Ø§Ø¶ÙŠØ©
            products: getDefaultProducts(), // Ù…Ù†ØªØ¬Ø§Øª Ø§ÙØªØ±Ø§Ø¶ÙŠØ©
            offers: [] // Ø¹Ø±ÙˆØ¶ ÙØ§Ø±ØºØ©
        };
    }
}

// Ø¯ÙˆØ§Ù„ Ø§ÙØªØ±Ø§Ø¶ÙŠØ© Ù„Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø§Ø­ØªÙŠØ§Ø·ÙŠØ©
// Ù‡Ø°Ù‡ Ø§Ù„Ø¯ÙˆØ§Ù„ ØªÙˆÙØ± Ø¨ÙŠØ§Ù†Ø§Øª Ø§ÙØªØ±Ø§Ø¶ÙŠØ© Ø¹Ù†Ø¯Ù…Ø§ ÙŠÙØ´Ù„ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù…Ù† Firebase

// Ø¯Ø§Ù„Ø© Ø¥Ø±Ø¬Ø§Ø¹ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ø§ÙØªØ±Ø§Ø¶ÙŠØ©
function getDefaultSettings() {
    return {
        storeName: 'Ø§Ù„Ù…ØªØ¬Ø±', // Ø§Ø³Ù… Ø§Ù„Ù…ØªØ¬Ø± Ø§Ù„Ø§ÙØªØ±Ø§Ø¶ÙŠ
        storeLogo: '../images/default-logo.png', // Ø´Ø¹Ø§Ø± Ø§Ù„Ù…ØªØ¬Ø± Ø§Ù„Ø§ÙØªØ±Ø§Ø¶ÙŠ
        currency: 'Ø¬.Ù…', // Ø§Ù„Ø¹Ù…Ù„Ø© Ø§Ù„Ø§ÙØªØ±Ø§Ø¶ÙŠØ©
        phone: '+20123456789' // Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ Ø§Ù„Ø§ÙØªØ±Ø§Ø¶ÙŠ
    };
}

// Ø¯Ø§Ù„Ø© Ø¥Ø±Ø¬Ø§Ø¹ Ø§Ù„ÙØ¦Ø§Øª Ø§Ù„Ø§ÙØªØ±Ø§Ø¶ÙŠØ©
function getDefaultCategories() {
    return [
        { value: 'all', label: 'Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª' }, // ÙØ¦Ø© "Ø§Ù„ÙƒÙ„"
        { value: 'vegetables', label: 'Ø®Ø¶Ø±Ø§ÙˆØ§Øª' }, // ÙØ¦Ø© Ø§Ù„Ø®Ø¶Ø±Ø§ÙˆØ§Øª
        { value: 'fruits', label: 'ÙÙˆØ§ÙƒÙ‡' } // ÙØ¦Ø© Ø§Ù„ÙÙˆØ§ÙƒÙ‡
    ];
}

// Ø¯Ø§Ù„Ø© Ø¥Ø±Ø¬Ø§Ø¹ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª Ø§Ù„Ø§ÙØªØ±Ø§Ø¶ÙŠØ©
function getDefaultProducts() {
    return [
        {
            id: '1', // Ù…Ø¹Ø±Ù Ø§Ù„Ù…Ù†ØªØ¬
            name: 'Ù…Ù†ØªØ¬ Ø§ÙØªØ±Ø§Ø¶ÙŠ 1', // Ø§Ø³Ù… Ø§Ù„Ù…Ù†ØªØ¬
            price: 50, // Ø³Ø¹Ø± Ø§Ù„Ù…Ù†ØªØ¬
            image: '../images/default-logo.png', // ØµÙˆØ±Ø© Ø§Ù„Ù…Ù†ØªØ¬
            category: 'vegetables'
        },
        {
            id: '2',
            name: 'Ù…Ù†ØªØ¬ Ø§ÙØªØ±Ø§Ø¶ÙŠ 2',
            price: 75,
            image: '../images/default-logo.png',
            category: 'vegetables' // Ø§Ù„ÙØ¦Ø© Ø§Ù„ØªÙŠ ÙŠÙ†ØªÙ…ÙŠ Ø¥Ù„ÙŠÙ‡Ø§ Ø§Ù„Ù…Ù†ØªØ¬
        },
        {
            id: '2', // Ù…Ø¹Ø±Ù Ø§Ù„Ù…Ù†ØªØ¬ Ø§Ù„Ø«Ø§Ù†ÙŠ
            name: 'Ù…Ù†ØªØ¬ Ø§ÙØªØ±Ø§Ø¶ÙŠ 2', // Ø§Ø³Ù… Ø§Ù„Ù…Ù†ØªØ¬ Ø§Ù„Ø«Ø§Ù†ÙŠ
            price: 75, // Ø³Ø¹Ø± Ø§Ù„Ù…Ù†ØªØ¬ Ø§Ù„Ø«Ø§Ù†ÙŠ
            image: '../images/default-logo.png', // ØµÙˆØ±Ø© Ø§Ù„Ù…Ù†ØªØ¬ Ø§Ù„Ø«Ø§Ù†ÙŠ
            category: 'fruits' // Ø§Ù„ÙØ¦Ø© Ø§Ù„ØªÙŠ ÙŠÙ†ØªÙ…ÙŠ Ø¥Ù„ÙŠÙ‡Ø§ Ø§Ù„Ù…Ù†ØªØ¬ Ø§Ù„Ø«Ø§Ù†ÙŠ
        }
    ];
}

// Ø¯ÙˆØ§Ù„ ÙˆÙ‡Ù…ÙŠØ© Ù„Ø¬Ù„Ø¨ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª (Ø§Ø³ØªØ¨Ø¯Ù„Ù‡Ø§ Ø¨Ø§Ù„Ø¯ÙˆØ§Ù„ Ø§Ù„Ø­Ù‚ÙŠÙ‚ÙŠØ©)
// Ù‡Ø°Ù‡ Ø§Ù„Ø¯ÙˆØ§Ù„ Ù…Ø¬Ø±Ø¯ Ø£Ù…Ø«Ù„Ø© ÙˆÙŠØ¬Ø¨ Ø§Ø³ØªØ¨Ø¯Ø§Ù„Ù‡Ø§ Ø¨Ø§Ù„Ø¯ÙˆØ§Ù„ Ø§Ù„Ø­Ù‚ÙŠÙ‚ÙŠØ© Ø§Ù„ØªÙŠ ØªØªØµÙ„ Ø¨Ù€ Firebase

// Ø¯Ø§Ù„Ø© Ø¬Ù„Ø¨ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª (ÙˆÙ‡Ù…ÙŠØ© - ÙŠØ¬Ø¨ Ø§Ø³ØªØ¨Ø¯Ø§Ù„Ù‡Ø§)
async function fetchSettings() {
    // Ø§Ø³ØªØ¨Ø¯Ù„ Ù‡Ø°Ø§ Ø¨Ø§Ù„ÙƒÙˆØ¯ Ø§Ù„Ø­Ù‚ÙŠÙ‚ÙŠ Ù„Ø¬Ù„Ø¨ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ù…Ù† Firebase
    throw new Error('Ø¯Ø§Ù„Ø© fetchSettings ØºÙŠØ± Ù…Ø·Ø¨Ù‚Ø©'); // Ø®Ø·Ø£ Ù„Ù„ØªØ°ÙƒÙŠØ± Ø¨Ø§Ø³ØªØ¨Ø¯Ø§Ù„ Ø§Ù„Ø¯Ø§Ù„Ø©
}

// Ø¯Ø§Ù„Ø© Ø¬Ù„Ø¨ Ø§Ù„ÙØ¦Ø§Øª (ÙˆÙ‡Ù…ÙŠØ© - ÙŠØ¬Ø¨ Ø§Ø³ØªØ¨Ø¯Ø§Ù„Ù‡Ø§)
async function fetchCategories() {
    // Ø§Ø³ØªØ¨Ø¯Ù„ Ù‡Ø°Ø§ Ø¨Ø§Ù„ÙƒÙˆØ¯ Ø§Ù„Ø­Ù‚ÙŠÙ‚ÙŠ Ù„Ø¬Ù„Ø¨ Ø§Ù„ÙØ¦Ø§Øª Ù…Ù† Firebase
    throw new Error('Ø¯Ø§Ù„Ø© fetchCategories ØºÙŠØ± Ù…Ø·Ø¨Ù‚Ø©'); // Ø®Ø·Ø£ Ù„Ù„ØªØ°ÙƒÙŠØ± Ø¨Ø§Ø³ØªØ¨Ø¯Ø§Ù„ Ø§Ù„Ø¯Ø§Ù„Ø©
}

// Ø¯Ø§Ù„Ø© Ø¬Ù„Ø¨ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª (ÙˆÙ‡Ù…ÙŠØ© - ÙŠØ¬Ø¨ Ø§Ø³ØªØ¨Ø¯Ø§Ù„Ù‡Ø§)
async function fetchProducts() {
    // Ø§Ø³ØªØ¨Ø¯Ù„ Ù‡Ø°Ø§ Ø¨Ø§Ù„ÙƒÙˆØ¯ Ø§Ù„Ø­Ù‚ÙŠÙ‚ÙŠ Ù„Ø¬Ù„Ø¨ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª Ù…Ù† Firebase
    throw new Error('Ø¯Ø§Ù„Ø© fetchProducts ØºÙŠØ± Ù…Ø·Ø¨Ù‚Ø©'); // Ø®Ø·Ø£ Ù„Ù„ØªØ°ÙƒÙŠØ± Ø¨Ø§Ø³ØªØ¨Ø¯Ø§Ù„ Ø§Ù„Ø¯Ø§Ù„Ø©
}

// Ø¯Ø§Ù„Ø© Ø¬Ù„Ø¨ Ø§Ù„Ø¹Ø±ÙˆØ¶ (ÙˆÙ‡Ù…ÙŠØ© - ÙŠØ¬Ø¨ Ø§Ø³ØªØ¨Ø¯Ø§Ù„Ù‡Ø§)
async function fetchOffers() {
    // Ø§Ø³ØªØ¨Ø¯Ù„ Ù‡Ø°Ø§ Ø¨Ø§Ù„ÙƒÙˆØ¯ Ø§Ù„Ø­Ù‚ÙŠÙ‚ÙŠ Ù„Ø¬Ù„Ø¨ Ø§Ù„Ø¹Ø±ÙˆØ¶ Ù…Ù† Firebase
    throw new Error('Ø¯Ø§Ù„Ø© fetchOffers ØºÙŠØ± Ù…Ø·Ø·Ø¨Ø©'); // Ø®Ø·Ø£ Ù„Ù„ØªØ°ÙƒÙŠØ± Ø¨Ø§Ø³ØªØ¨Ø¯Ø§Ù„ Ø§Ù„Ø¯Ø§Ù„Ø©
}

// Ø¨Ø¯Ø¡ Ø§Ù„ÙØ­Øµ Ø¹Ù†Ø¯ ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØµÙØ­Ø©
// Ù‡Ø°Ø§ Ø§Ù„Ø­Ø¯Ø« ÙŠØ¶Ù…Ù† Ø¨Ø¯Ø¡ ÙØ­Øµ Firebase ÙÙˆØ±Ø§Ù‹ Ø¨Ø¹Ø¯ ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØµÙØ­Ø©
document.addEventListener('DOMContentLoaded', function() {
    initFirebaseCheck(); // Ø¨Ø¯Ø¡ Ø¹Ù…Ù„ÙŠØ© ÙØ­Øµ Firebase
});

// ØªØµØ¯ÙŠØ± Ø§Ù„Ø¯ÙˆØ§Ù„ Ù„Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„Ø®Ø§Ø±Ø¬ÙŠ
// Ù‡Ø°Ù‡ Ø§Ù„Ø¯ÙˆØ§Ù„ ØªØµØ¯Ø± Ù„ØªÙƒÙˆÙ† Ù…ØªØ§Ø­Ø© Ù„Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù… Ù…Ù† Ù…Ù„ÙØ§Øª JavaScript Ø£Ø®Ø±Ù‰

window.firebaseReady = () => firebaseReady; // Ø¯Ø§Ù„Ø© Ù„Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø¬Ø§Ù‡Ø²ÙŠØ© Firebase
window.waitForFirebaseOptimized = waitForFirebaseOptimized; // Ø¯Ø§Ù„Ø© Ø§Ù†ØªØ¸Ø§Ø± Firebase Ø§Ù„Ù…Ø­Ø³Ù†Ø©
window.safeFetchData = safeFetchData; // Ø¯Ø§Ù„Ø© Ø¬Ù„Ø¨ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø¢Ù…Ù†Ø©
window.loadAllDataSafely = loadAllDataSafely; // Ø¯Ø§Ù„Ø© ØªØ­Ù…ÙŠÙ„ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø¨Ø£Ù…Ø§Ù†
window.initFirebaseCheck = initFirebaseCheck; // Ø¯Ø§Ù„Ø© ØªÙ‡ÙŠØ¦Ø© ÙØ­Øµ Firebase
